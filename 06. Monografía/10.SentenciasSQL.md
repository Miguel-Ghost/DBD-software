# Sentencias SQL por cada Prototipo


### 4. Sentencias SQL módulo de Control

### Caso 1
<table>
   <tr>
      <td>Código Requerimiento</td>
      <td>R401</td>
   </tr>
   <tr>
      <td>Código interfaz</td>
      <td>I401</td>
   </tr>
   <tr>
      <td>Imagen interfaz</td>
      <td>
         <img src="https://github.com/Alexclb0/Holamundo/assets/164266999/5468b073-0253-46e4-9c92-a86ee9ddae30">
      </td>
   </tr>
   <tr>
      <td colspan="2">Sentencias SQL</td>
   </tr>
</table>

## Evento:
### Ver conductores: 
Se mostrará en pantalla la lista de todos los conductores para poder registrar su disponibilidad en base a los datos correspondiente a cada uno.
``` sql
SELECT 
    t.cod_transportista AS "Código del Conductor",
    t.cod_empleado AS "Código del Empleado",
    lt.descripcion AS "Tipo de Licencia",
    t.fecha_vencimiento_licencia AS "Fecha de Vencimiento de Licencia",
    t.fecha_ultimo_traslado AS "Fecha Último Traslado",
    te.descripcion AS "Estado del Conductor"
FROM 
    transportista t
JOIN 
    licencia_tipo lt ON t.cod_tipo_licencia = lt.cod_tipo_licencia
JOIN 
    transportista_estado te ON t.cod_estado_transportista = te.cod_estado_transportista;
```

### Caso 2
<table>
   <tr>
      <td>Código Requerimiento</td>
      <td>R401</td>
   </tr>
   <tr>
      <td>Código interfaz</td>
      <td>I401</td>
   </tr>
   <tr>
      <td>Imagen interfaz</td>
      <td>
         <img src="https://github.com/Alexclb0/Holamundo/assets/164266999/a36b2b4b-8654-44ec-a3ba-df7ff85c4d1e">
      </td>
   </tr>
   <tr>
      <td colspan="2">Sentencias SQL</td>
   </tr>
</table>

## Evento:
### Botón Estado: 
El botón sirve para que el administrador pueda cambiar el estado de disponibilidad del conductor  que puede ser Disponible, No Disponible y Cuarentena.
``` sql
UPDATE Transportista SET cod_estado_transportista = <1> WHERE cod_estado_transportista = 2 AND cod_transportista = <2>
```

### Caso 3
<table>
   <tr>
      <td>Código Requerimiento</td>
      <td>R402</td>
   </tr>
   <tr>
      <td>Código interfaz</td>
      <td>I402</td>
   </tr>
   <tr>
      <td>Imagen interfaz</td>
      <td>
         <img src="https://github.com/Alexclb0/Holamundo/assets/164266999/41c637e5-bdc6-4ed0-8dd5-562eeef707cb">
      </td>
   </tr>
   <tr>
      <td colspan="2">Sentencias SQL</td>
   </tr>
</table>

## Evento:
### Ver Vehículos: 
Se mostrará en pantalla la lista de todos los vehículos para poder registrar su disponibilidad en base a los datos correspondiente a cada uno.
``` sql
SELECT 
    v.cod_vehiculo AS "Código Vehículo",
    v.año_fabricacion AS "Año Fabricación",
    v.fecha_ultimo_mantenimiento AS "Fecha Último Mantenimiento",
    v.capacidad_carga AS "Capacidad de Carga",
    vm.descripcion AS "Marca",
    v.placa AS "Placa",
    v.fecha_ultimo_viaje AS "Fecha Último Viaje",
    ve.descripcion AS "Estado del Vehículo"
FROM 
    vehiculo v
JOIN 
    vehiculo_modelo vm ON v.cod_vehiculo_modelo = vm.cod_vehiculo_modelo
JOIN 
    vehiculo_estado ve ON v.cod_vehiculo_estado = ve.cod_vehiculo_estado

```

### Caso 4
<table>
   <tr>
      <td>Código Requerimiento</td>
      <td>R402</td>
   </tr>
   <tr>
      <td>Código interfaz</td>
      <td>I402</td>
   </tr>
   <tr>
      <td>Imagen interfaz</td>
      <td>
         <img src="https://github.com/Alexclb0/Holamundo/assets/164266999/edd1ee65-2adb-45c4-9058-8d5c27c0e206">
      </td>
   </tr>
   <tr>
      <td colspan="2">Sentencias SQL</td>
   </tr>
</table>

## Evento:
### Botón estado: 
El botón sirve para que el administrador pueda cambiar el estado de disponibilidad del vehículo  que puede ser Disponible, No Disponible y Cuarentena.
``` sql
UPDATE Vehículo SET cod_estado_vehiculo = <1> WHERE cod_estado_vehiculo = 2 AND cod_vehiculo = <2>

```

### Caso 5
<table>
   <tr>
      <td>Código Requerimiento</td>
      <td>R403</td>
   </tr>
   <tr>
      <td>Código interfaz</td>
      <td>I403,I404,I405,I406,I407</td>
   </tr>
   <tr>
      <td>Imagen interfaz</td>
      <td>
         <img src="https://github.com/Alexclb0/Holamundo/assets/164266999/a54903b4-1a59-4620-bf74-38885420d54e">
         <img src="https://github.com/Alexclb0/Holamundo/assets/164266999/7721353f-20f2-41e9-a837-bc1c2005fd9c">
         <img src="https://github.com/Alexclb0/Holamundo/assets/164266999/617f5b07-1d3c-4370-ab8c-39bd08ad88d3">
         <img src="https://github.com/Alexclb0/Holamundo/assets/164266999/e95d453b-0427-48ee-8a46-e54368231569">
      </td>
   </tr>
   <tr>
      <td colspan="2">Sentencias SQL</td>
   </tr>
</table>

## Evento:
### Nueva incidencia: 
El administrador podrá registrar una nueva incidencia seleccionando primero el tipo de incidencia que se presenta. Dependiendo de la opción elegida, se determinará un tipo de procedimiento específico, cuya selección dependerá del empleado y del contexto de la situación. Este procedimiento elegido se basará en un tipo de norma aplicable.

1. Se llenará la lista de tipos de incidencia según el contexto que se presentase.

``` sql 
SELECT * FROM incidencia_tipo;
```

2. Se seleccionará el tipo de procedimiento a efectuar en base a determinado tipo de incidencia. 

``` sql 
SELECT * FROM procedimiento_tipo;
```

3. Se seleccionará el tipo de norma en las cuales se basa cada procedimiento.

``` sql 
SELECT * FROM norma_tipo;
```

4. Al apretar el botón Registrar se actualiza el código del tipo de incidencia, el tipo de procedimiento, la descripción detallada de la incidencia, tipo de norma, fecha de ocurrencia, hora de ocurrencia, tiempo estimado de procedimiento (en horas).

``` sql 
UPDATE incidencia
SET cod_tipo_incidencia = <1>, cod_tipo_procedimiento =<2>, descripcion = <3>, cod_norma_tipo = <4>, fecha_ocurrencia=<5>, hora_ocurrencia=<6>, id_traslado=<7>, tiempo_estimado=<8> 
WHERE incidencia.cod_incidencia = <9>
```
Donde <1> es el código del tipo de incidencia escogido por el empleado, tomando en cuenta el contexto presentado. 

Donde <2> es el código del tipo de procedimiento escogido por el empleado, tomando en cuenta el contexto presentado. 

Donde <3> es la descripción a detalle de la incidencia, escrita por el empleado.

Donde <4> es el código del tipo de norma escogido por el empleado, tomando en cuenta el contexto presentado. 

Donde <5> es la fecha en la que ocurrió la incidencia, registrada por el empleado. 

Donde <6> es la hora exacta en la que ocurrió la incidencia, registrada por el empleado. 

Donde <7> es el código del traslado, en el cual se presentó determinada incidencia. 

Donde <8> es el tiempo estimado en horas de la duración del procedimiento.

Donde <9> es el código de la incidencia actual. 


### Caso 6
<table>
   <tr>
      <td>Código Requerimiento</td>
      <td>R403</td>
   </tr>
   <tr>
      <td>Código interfaz</td>
      <td>I407</td>
   </tr>
   <tr>
      <td>Imagen interfaz</td>
      <td>
         <img src="https://github.com/fiis-bd241/grupo01/assets/164266999/dfd1cd46-edc9-4934-a378-9dac58e0f49a">
      </td>
   </tr>
   <tr>
      <td colspan="2">Sentencias SQL</td>
   </tr>
</table>

## Evento:
### Ver Incidencias: 
Se mostrará en pantalla la lista de todas las incidencias para poder registrar el grado de atención brindado en base a los datos correspondiente a cada uno.

``` sql
SELECT 
    i.cod_incidencia AS "Código Incidencia",
    i.id_traslado AS "Código Traslado",
    it.descripcion AS "Tipo de Incidencia",
    i.fecha_ocurrencia AS "Fecha de Ocurrencia",
    i.hora_ocurrencia AS "Hora de Ocurrencia",
    i.cod_estado_incidencia AS "Estado Incidencia"
FROM 
    incidencia i
JOIN 
    incidencia_tipo it ON i.cod_tipo_incidencia = it.cod_tipo_incidencia;

```

### Caso 7
<table>
   <tr>
      <td>Código Requerimiento</td>
      <td>R404</td>
   </tr>
   <tr>
      <td>Código interfaz</td>
      <td>I407</td>
   </tr>
   <tr>
      <td>Imagen interfaz</td>
      <td>
         <img src="https://github.com/fiis-bd241/grupo01/assets/164266999/98f05098-900c-4e63-9d0b-eab06cd2cac9">
      </td>
   </tr>
   <tr>
      <td colspan="2">Sentencias SQL</td>
   </tr>
</table>

## Evento:
### Botón estado: 
El botón sirve para que el administrador pueda cambiar el estado de atención de la incidencia  que puede ser Solucionado o Pendiente. 
``` sql
UPDATE incidencia SET cod_estado_incidencia = <1> WHERE cod_estado_incidencia = 2 AND cod_incidencia = <2>

```
